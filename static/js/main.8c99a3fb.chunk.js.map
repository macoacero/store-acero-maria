{"version":3,"sources":["images/icons/buy-blue.svg","components/Pagination.js","components/ProductsList.js","actions/index.js","containers/Products.js","components/History.js","containers/History.js","components/Header.js","containers/Header.js","components/App.js","reducers/index.js","stores/index.js","index.js"],"names":["module","exports","usePagination","data","itemsPerPage","useState","currentPage","setCurrentPage","maxPage","Math","ceil","length","next","min","prev","max","jump","page","pageNumber","currentData","begin","end","slice","ProductsList","onLoadProd","products","hasError","isLoading","user","onClickRedeem","errorRed","points","productId","category","setCategory","unique","filter","cat","index","self","findIndex","t","optionsCategory","label","value","concat","map","prod","setPage","count","_DATA","useEffect","className","placeholder","styles","container","width","menu","background","position","zIndex","options","defaultValue","onChange","product","i","key","cost","_id","onClick","alt","src","BuyBlue","img","url","name","Pagination","size","variant","shape","e","p","loadingError","bool","type","hasErrored","loadingInProgress","errorRedeem","headers","Accept","Authorization","getUser","dispatch","fetch","then","response","ok","Error","statusText","json","loadingUser","catch","connect","state","loadingProducts","uploadRedeemProduct","uploadPoint","ownProps","method","body","JSON","stringify","error","redeemProduct","History","onLoadHistory","history","loadingHistory","Header","onLoadUser","loadPoints","setPoints","Fragment","addPoints","App","to","path","Products","combineReducers","action","logger","store","createStore","rootReducer","applyMiddleware","thunk","storeFactory","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8c99a3fb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/buy-blue.2f11a957.svg\";","import { useState } from \"react\";\r\n\r\nfunction usePagination(data, itemsPerPage) {\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const maxPage = Math.ceil(data.length / itemsPerPage);\r\n\r\n    function currentData() {\r\n        const begin = (currentPage - 1) * itemsPerPage;\r\n        const end = begin + itemsPerPage;\r\n        return data.slice(begin, end);\r\n    }\r\n\r\n    function next() {\r\n        setCurrentPage((currentPage) => Math.min(currentPage + 1, maxPage));\r\n    }\r\n\r\n    function prev() {\r\n        setCurrentPage((currentPage) => Math.max(currentPage - 1, 1));\r\n    }\r\n\r\n    function jump(page) {\r\n        const pageNumber = Math.max(1, page);\r\n        setCurrentPage((currentPage) => Math.min(pageNumber, maxPage));\r\n    }\r\n\r\n    return { next, prev, jump, currentData, currentPage, maxPage };\r\n}\r\n\r\nexport default usePagination;","import React, { useEffect, useState } from 'react';\r\nimport BuyBlue from '../images/icons/buy-blue.svg';\r\nimport Select from \"react-select\";\r\nimport { Pagination } from \"@material-ui/lab\";\r\nimport usePagination from \"./Pagination\";\r\n\r\nconst ProductsList = ({ onLoadProd, products, hasError, isLoading, user, onClickRedeem, errorRed, points, productId }) => {\r\n\r\n  const customStyles = {\r\n    container: () => ({\r\n      width: 220,\r\n    }),\r\n    menu:() => ({\r\n      width: 220,\r\n      background: '#ffffff',\r\n      position: 'absolute',\r\n      zIndex: 500\r\n    }),\r\n  }\r\n\r\nconst [category, setCategory] = useState(\"\");\r\n\r\nconst unique = products.filter((cat, index, self) =>\r\n  index === self.findIndex((t) => (\r\n    t.category === cat.category\r\n  ))\r\n)\r\n\r\nconst optionsCategory = [{ label: \"Todas las categorias\", value: 'all'}].concat(unique.map(prod => {\r\n  return { value: prod.category, label: prod.category }\r\n}));\r\n\r\nconst handleChangeCategory = category => {\r\n  setCategory(category);\r\n};\r\n\r\nlet [page, setPage] = useState(1);\r\nconst PER_PAGE = 12;\r\n\r\nconst count = Math.ceil(\r\n  category.value === 'all' || category === '' ?  \r\n  products.length / PER_PAGE :  \r\n  products.filter(cat => cat.category === category.value).length / PER_PAGE);\r\n\r\nconst _DATA = usePagination(\r\n  category.value === 'all' || category === '' ? \r\n  products :  products.filter(cat => cat.category === category.value), PER_PAGE);\r\n\r\nconst handleChange = (e, p) => {\r\n  setPage(p);\r\n  _DATA.jump(p);\r\n};\r\n\r\nuseEffect(() => {\r\n  onLoadProd();\r\n}, [onLoadProd, points]);\r\n\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Select placeholder={category.value} styles={customStyles} options={optionsCategory} defaultValue={{ label: \"Todas las categorias\", value: 'all' }} onChange={handleChangeCategory}/>\r\n      <h2>Productos</h2>\r\n      <div className=\"row\">\r\n        {isLoading ? <h6>Loading…</h6> : !hasError ?\r\n          _DATA.currentData().map((product, i) =>\r\n            <div className=\"col-sm-4\" key={i}>\r\n              <div className=\"card\">\r\n              {user.points >= product.cost ?\r\n                <div className={!errorRed ? product._id === productId ? \"redeemed-product\" : \"no-redeemed-product\" : \"error-redeeming-product\" }>\r\n                  <span className=\"points-redeem\">{product.cost} Puntos</span>\r\n                  <button className=\"redeem-button\" onClick={() => onClickRedeem(product._id)}>Redimir ahora</button>\r\n                  {!errorRed ? product._id === productId ? \"El pruducto fue redimido exitosamente\" : null : \"No se pudo redimir el producto. Intente más tarde\"}\r\n                </div> : null}\r\n                {user.points < product.cost ? <div className=\"missing-points\">Faltan: {product.cost - user.points} Puntos</div> : <div><img alt=\"\" src={BuyBlue} className=\"redeemable\"/></div>}\r\n                <img alt=\"product\" src={product.img.url} className=\"image-prod\"/>\r\n                <div className=\"txt\">\r\n                  <span className=\"category\" >\r\n                    {product.category}\r\n                  </span>\r\n                  <span className=\"name\" >\r\n                    {product.name}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n          </div>) : <div>Error cargando los productos. Por favor intente más tarde.</div>\r\n        }\r\n      </div>\r\n      <Pagination\r\n        count={count}\r\n        size=\"large\"\r\n        page={page}\r\n        variant=\"outlined\"\r\n        shape=\"rounded\"\r\n        onChange={handleChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductsList\r\n","export const loadingError = (bool) => ({\r\n  type: \"LOADING_ERROR\",\r\n  hasErrored: bool\r\n});\r\n\r\nexport const loadingInProgress = (bool) => ({\r\n  type: \"LOADING_IN_PROGRESS\",\r\n  isLoading: bool\r\n});\r\n\r\nexport const loadingProducts = (products) => ({\r\n  type: \"LOADING_PRODUCTS\",\r\n  products\r\n});\r\n\r\nexport const loadingUser = (user) => ({\r\n  type: \"LOADING_USER\",\r\n  user\r\n});\r\n\r\nexport const loadingHistory = (history) => ({\r\n  type: \"LOADING_HISTORY\",\r\n  history\r\n});\r\n\r\nexport const uploadPoint = (points) => ({\r\n  type: \"UPLOAD_POINTS\",\r\n  points\r\n});\r\n\r\nexport const uploadRedeemProduct = (productId) => ({\r\n  type: \"REDEEM_PRODUCT\",\r\n  productId\r\n});\r\n\r\nexport const errorRedeem = (bool) => {\r\n  return ({\r\n    type: \"ERROR_REDEEM\",\r\n    errorRed: bool\r\n  });\r\n};\r\n\r\nexport const filterByCategory = (category) => {\r\n  return ({\r\n    type: \"FILTER_CATEGORY\",\r\n    category\r\n  });\r\n}\r\n\r\n\r\nconst headers = {\r\n  \"Content-Type\": \"application/json\",\r\n  Accept: \"application/json\",\r\n  Authorization: `Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjQ0NmUzZjc0MjM1MjAwMWVkOTA5N2EiLCJpYXQiOjE1OTgzMjAxOTF9.SvYm_3UWhP11QddDsVSJU7rVdMnAzNzl9fLO4dcPc4k`\r\n}\r\n\r\nexport const getProducts = () => {\r\n  return (dispatch) => {\r\n    dispatch(loadingError(false));\r\n    dispatch(loadingInProgress(true));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/products\", { headers })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        dispatch(loadingInProgress(false));\r\n\r\n        return response;\r\n\r\n      })\r\n\r\n      .then((response) => response.json())\r\n      .then((products) => dispatch(loadingProducts(products)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const getUser = () => {\r\n  return (dispatch) => {\r\n    dispatch(loadingError(false));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/user/me\", { headers })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response;\r\n      })\r\n      .then((response) => response.json())\r\n      .then((user) => dispatch(loadingUser(user)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const getHistory = () => {\r\n  return (dispatch) => {\r\n    dispatch(loadingError(false));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/user/history\", { headers })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response;\r\n      })\r\n      .then((response) => response.json())\r\n      .then((history) => dispatch(loadingHistory(history)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const addPoints = (points) => {\r\n  return (dispatch) => {\r\n    const data = { \"amount\": points };\r\n\r\n    dispatch(loadingError(false));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/user/points\", {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response;\r\n      })\r\n      .then((response) => response.json())\r\n      .then((points) => dispatch(uploadPoint(points)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const redeemProduct = (productId) => {\r\n  return (dispatch) => {\r\n    const data = { \"productId\": productId };\r\n\r\n    dispatch(errorRedeem(false));\r\n    fetch('https://coding-challenge-api.aerolab.co/redeem', {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        dispatch(uploadRedeemProduct(productId))\r\n        dispatch(getUser())\r\n      })\r\n      .catch((error) => {\r\n        dispatch(errorRedeem(true))\r\n      });\r\n  };\r\n};\r\n\r\n","import { connect } from \"react-redux\";\r\nimport ProductsList from \"../components/ProductsList\";\r\nimport { getProducts, redeemProduct } from '../actions'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  products: state.loadingProducts,\r\n  hasError: state.loadingError,\r\n  isLoading: state.loadingInProgress,\r\n  user: state.loadingUser,\r\n  productId: state.uploadRedeemProduct,\r\n  errorRed: state.errorRedeem,\r\n  points: state.uploadPoint\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n  onLoadProd: () => dispatch(getProducts()),\r\n  onClickRedeem: (productId) => dispatch(redeemProduct(productId)),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(ProductsList)","import React, { useEffect, useState } from 'react';\r\nimport { Pagination } from \"@material-ui/lab\";\r\nimport usePagination from \"./Pagination\";\r\n\r\nconst History = ({ onLoadHistory, history, hasError, isLoading }) => {\r\n\r\n  let [page, setPage] = useState(1);\r\n  const PER_PAGE = 12;\r\n  \r\n  const count = Math.ceil( history.length / PER_PAGE);\r\n  \r\n  const _DATA = usePagination(history, PER_PAGE);\r\n  \r\n  const handleChange = (e, p) => {\r\n    setPage(p);\r\n    _DATA.jump(p);\r\n  };\r\n\r\nuseEffect(() => {\r\n  onLoadHistory();\r\n    }, [onLoadHistory]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Historial</h2>\r\n      <div className=\"row\">\r\n      {isLoading ? <h6>Loading…</h6> : !hasError ?\r\n          _DATA.currentData().map((product, i) =>\r\n            <div className=\"col-sm-4\">\r\n              <div className=\"card\" key={i}>\r\n                <img alt=\"product\" src={product.img.url} className=\"image-prod\"/>\r\n                <div className=\"txt\">\r\n                  <span className=\"category\" >\r\n                    {product.category}\r\n                  </span>\r\n                  <span className=\"name\" >\r\n                    {product.name}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n          </div>) : <div>Error cargando los productos. Por favor intente más tarde.</div>\r\n        }\r\n      </div>\r\n      <Pagination\r\n        count={count}\r\n        size=\"large\"\r\n        page={page}\r\n        variant=\"outlined\"\r\n        shape=\"rounded\"\r\n        onChange={handleChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default History\r\n","import { connect } from \"react-redux\";\r\nimport History from \"../components/History\";\r\nimport { getHistory } from '../actions'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  history: state.loadingHistory,\r\n  hasError: state.loadingError,\r\n  isLoading: state.loadingInProgress,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n  onLoadHistory: () => dispatch(getHistory()),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(History)","import React, { useEffect, useState } from 'react';\r\nimport Select from \"react-select\";\r\n\r\nconst Header = ({ onLoadUser, user, loadPoints, products }) => {\r\n\r\n  const customStyles = {\r\n    container: () => ({\r\n      width: 200,\r\n    }),\r\n    menu:() => ({\r\n      width: 200,\r\n      background: '#ffffff',\r\n      position: 'absolute'\r\n    }),\r\n  }\r\n\r\n  const pointsOptions = [\r\n    { value: 1000, label: \"1000\" },\r\n    { value: 5000, label: \"5000\" },\r\n    { value: 7500, label: \"7500\" }\r\n  ];\r\n \r\n\r\n  const [points, setPoints] = useState(\"\");\r\n    \r\n  useEffect(() => {\r\n    onLoadUser();\r\n    setPoints(points);\r\n      }, [onLoadUser, points]);\r\n\r\n  const handleChangePoints = points => {\r\n    setPoints(points);\r\n    loadPoints(points.value);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"top-bar\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"user-name\">{user.name}</div>\r\n            <div className=\"points\">{user.points} <span>puntos</span></div>\r\n          </div>\r\n        </div>\r\n        <Select styles={customStyles} placeholder=\" Agregar puntos\" options={pointsOptions} onChange={handleChangePoints} />\r\n      </div>\r\n      <div className=\"header\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import { connect } from \"react-redux\";\r\nimport Header from \"../components/Header\";\r\nimport { getUser, addPoints } from '../actions'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  products: state.loadingProducts,\r\n  user: state.loadingUser,\r\n  points: state.uploadPoint\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n  onLoadUser: () => dispatch(getUser()),\r\n  loadPoints: (points) => dispatch(addPoints(points)),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(Header)","import React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\nimport Products from '../containers/Products';\r\nimport History from '../containers/History';\r\nimport Header from '../containers/Header';\r\nimport '../styles.scss';\r\n\r\nexport default function App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Header />\r\n      <Router>\r\n        <div className=\"container\">\r\n          <nav>\r\n            <ul>\r\n              <li>\r\n                <Link to=\"/\">Home</Link>\r\n              </li>\r\n              <li>\r\n                <Link to=\"/historial\">Historial</Link>\r\n              </li>\r\n            </ul>\r\n          </nav>\r\n\r\n          <Switch>\r\n            <Route path=\"/historial\">\r\n              <History />\r\n            </Route>\r\n            <Route path=\"/\">\r\n              <Products />\r\n            </Route>\r\n          </Switch>\r\n        </div>\r\n      </Router>\r\n    </div>\r\n  );\r\n}","import { combineReducers } from 'redux'\r\n\r\nconst loadingError = (state = false, action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_ERROR':\r\n      return action.hasErrored;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst loadingInProgress = (state = false, action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_IN_PROGRESS':\r\n      return action.isLoading;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst loadingProducts = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_PRODUCTS':\r\n      return action.products\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst loadingUser = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_USER':\r\n      return action.user\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst loadingHistory = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_HISTORY':\r\n      return action.history\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst uploadRedeemProduct = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'REDEEM_PRODUCT':\r\n      return action.productId\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst errorRedeem= (state = false, action) => {\r\n  switch (action.type) {\r\n    case 'ERROR_REDEEM':\r\n      return action.errorRed\r\n    default:\r\n      return state  }\r\n}\r\n\r\nexport default combineReducers({\r\n  loadingUser,\r\n  loadingProducts,\r\n  loadingError,\r\n  loadingInProgress,\r\n  loadingHistory,\r\n  uploadRedeemProduct,\r\n  errorRedeem\r\n})\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport rootReducer from '../reducers'\r\nimport thunk from 'redux-thunk'\r\n\r\nconst logger = store => next => action => {\r\n  let result\r\n  result = next(action)\r\n  return result\r\n}\r\n\r\nconst storeFactory = () =>\r\n  createStore(\r\n    rootReducer,\r\n    applyMiddleware(logger, thunk)\r\n  )\r\n\r\nexport default storeFactory","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport { Provider } from 'react-redux'\nimport storeFactory from './stores/index'\n\nconst store = storeFactory()\n\nReactDOM.render(\n  <Provider store={store}>\n      <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}