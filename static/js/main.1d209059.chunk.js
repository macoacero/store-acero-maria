(this["webpackJsonpstore-acero-maria"]=this["webpackJsonpstore-acero-maria"]||[]).push([[0],{32:function(e,t,n){e.exports=n.p+"static/media/buy-blue.2f11a957.svg"},40:function(e,t,n){e.exports=n(51)},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),c=n.n(o),u=n(22),i=n(3),l=n(12),s=n(7),d=n(32),m=n.n(d),f=n(21),h=n(65);var p=function(e,t){var n=Object(r.useState)(1),a=Object(s.a)(n,2),o=a[0],c=a[1],u=Math.ceil(e.length/t);return{next:function(){c((function(e){return Math.min(e+1,u)}))},prev:function(){c((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);c((function(e){return Math.min(t,u)}))},currentData:function(){var n=(o-1)*t,r=n+t;return e.slice(n,r)},currentPage:o,maxPage:u}},g=function(e){var t=e.onLoadProd,n=e.products,o=e.hasError,c=e.isLoading,u=e.user,i=e.onClickRedeem,l=e.errorRed,d=e.points,g=e.productId,E=Object(r.useState)(""),v=Object(s.a)(E,2),O=v[0],N=v[1],b=n.filter((function(e,t,n){return t===n.findIndex((function(t){return t.category===e.category}))})),y=[{label:"Todas las categorias",value:"all"}].concat(b.map((function(e){return{value:e.category,label:e.category}}))),R=Object(r.useState)(1),j=Object(s.a)(R,2),I=j[0],P=j[1],L=Math.ceil("all"===O.value||""===O?n.length/12:n.filter((function(e){return e.category===O.value})).length/12),S=p("all"===O.value||""===O?n:n.filter((function(e){return e.category===O.value})),12);return Object(r.useEffect)((function(){t()}),[t,d]),a.a.createElement("div",{className:"container"},a.a.createElement(f.a,{placeholder:O.value,styles:{container:function(){return{width:220}},menu:function(){return{width:220,background:"#ffffff",position:"absolute",zIndex:500}}},options:y,defaultValue:{label:"Todas las categorias",value:"all"},onChange:function(e){N(e)}}),a.a.createElement("h2",null,"Productos"),a.a.createElement("div",{className:"row"},c?a.a.createElement("h6",null,"Loading\u2026"):o?a.a.createElement("div",null,"Error cargando los productos. Por favor intente m\xe1s tarde."):S.currentData().map((function(e,t){return a.a.createElement("div",{className:"col-sm-4",key:t},a.a.createElement("div",{className:"card"},u.points>=e.cost?a.a.createElement("div",{className:l?"error-redeeming-product":e._id===g?"redeemed-product":"no-redeemed-product"},a.a.createElement("span",{className:"points-redeem"},e.cost," Puntos"),a.a.createElement("button",{className:"redeem-button",onClick:function(){return i(e._id)}},"Redimir ahora"),l?"No se pudo redimir el producto. Intente m\xe1s tarde":e._id===g?"El pruducto fue redimido exitosamente":null):null,u.points<e.cost?a.a.createElement("div",{className:"missing-points"},"Faltan: ",e.cost-u.points," Puntos"):a.a.createElement("div",null,a.a.createElement("img",{alt:"",src:m.a,className:"redeemable"})),a.a.createElement("img",{alt:"product",src:e.img.url,className:"image-prod"}),a.a.createElement("div",{className:"txt"},a.a.createElement("span",{className:"category"},e.category),a.a.createElement("span",{className:"name"},e.name))))}))),a.a.createElement(h.a,{count:L,size:"large",page:I,variant:"outlined",shape:"rounded",onChange:function(e,t){P(t),S.jump(t)}}))},E=function(e){return{type:"LOADING_ERROR",hasErrored:e}},v=function(e){return{type:"LOADING_IN_PROGRESS",isLoading:e}},O=function(e){return{type:"ERROR_REDEEM",errorRed:e}},N={"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjQ0NmUzZjc0MjM1MjAwMWVkOTA5N2EiLCJpYXQiOjE1OTgzMjAxOTF9.SvYm_3UWhP11QddDsVSJU7rVdMnAzNzl9fLO4dcPc4k"},b=Object(l.b)((function(e){return{products:e.loadingProducts,hasError:e.loadingError,isLoading:e.loadingInProgress,user:e.loadingUser,productId:e.uploadRedeemProduct,errorRed:e.errorRedeem,points:e.uploadPoint}}),(function(e,t){return{onLoadProd:function(){return e((function(e){e(E(!1)),e(v(!0)),fetch("https://coding-challenge-api.aerolab.co/products",{headers:N}).then((function(t){if(!t.ok)throw Error(t.statusText);return e(v(!1)),t})).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"LOADING_PRODUCTS",products:e}}(t))})).catch((function(){return e(E(!0))}))}))},onClickRedeem:function(t){return e(function(e){return function(t){var n={productId:e};t(O(!1)),fetch("https://coding-challenge-api.aerolab.co/redeem",{method:"POST",headers:N,body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw Error(e.statusText);return e.json()})).then((function(){return t(function(e){return{type:"REDEEM_PRODUCT",productId:e}}(e))})).catch((function(e){t(O(!0))}))}}(t))}}}))(g),y=function(e){var t=e.onLoadHistory,n=e.history,o=e.hasError,c=e.isLoading,u=Object(r.useState)(1),i=Object(s.a)(u,2),l=i[0],d=i[1],m=Math.ceil(n.length/12),f=p(n,12);return Object(r.useEffect)((function(){t()}),[t]),a.a.createElement("div",{className:"container"},a.a.createElement("h2",null,"Historial"),a.a.createElement("div",{className:"row"},c?a.a.createElement("h6",null,"Loading\u2026"):o?a.a.createElement("div",null,"Error cargando los productos. Por favor intente m\xe1s tarde."):f.currentData().map((function(e,t){return a.a.createElement("div",{className:"col-sm-4"},a.a.createElement("div",{className:"card",key:t},a.a.createElement("img",{alt:"product",src:e.img.url,className:"image-prod"}),a.a.createElement("div",{className:"txt"},a.a.createElement("span",{className:"category"},e.category),a.a.createElement("span",{className:"name"},e.name))))}))),a.a.createElement(h.a,{count:m,size:"large",page:l,variant:"outlined",shape:"rounded",onChange:function(e,t){d(t),f.jump(t)}}))},R=Object(l.b)((function(e){return{history:e.loadingHistory,hasError:e.loadingError,isLoading:e.loadingInProgress}}),(function(e,t){return{onLoadHistory:function(){return e((function(e){e(E(!1)),fetch("https://coding-challenge-api.aerolab.co/user/history",{headers:N}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"LOADING_HISTORY",history:e}}(t))})).catch((function(){return e(E(!0))}))}))}}}))(y),j=function(e){var t=e.onLoadUser,n=e.user,o=e.loadPoints,c=(e.products,Object(r.useState)("")),u=Object(s.a)(c,2),i=u[0],l=u[1];Object(r.useEffect)((function(){t()}),[t,i]);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"top-bar"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"user-name"},n.name),a.a.createElement("div",{className:"points"},n.points," ",a.a.createElement("span",null,"puntos")))),a.a.createElement(f.a,{styles:{container:function(){return{width:200}},menu:function(){return{width:200,background:"#ffffff",position:"absolute"}}},placeholder:" Agregar puntos",options:[{value:1e3,label:"1000"},{value:5e3,label:"5000"},{value:7500,label:"7500"}],onChange:function(e){l(e),o(e.value)}})),a.a.createElement("div",{className:"header"},a.a.createElement("div",{className:"container"},a.a.createElement("div",{className:"row"}))))},I=Object(l.b)((function(e){return{products:e.loadingProducts,user:e.loadingUser,points:e.uploadPoint}}),(function(e,t){return{onLoadUser:function(){return e((function(e){e(E(!1)),fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:N}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(t){return e(function(e){return{type:"LOADING_USER",user:e}}(t))})).catch((function(){return e(E(!0))}))}))},loadPoints:function(t){return e(function(e){return function(t){var n={amount:e};t(E(!1)),fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",headers:N,body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw Error(e.statusText);return e})).then((function(e){return e.json()})).then((function(e){return t(function(e){return{type:"UPLOAD_POINTS",points:e}}(e))})).catch((function(){return t(E(!0))}))}}(t))}}}))(j);n(49);function P(){return a.a.createElement("div",{className:"App"},a.a.createElement(I,null),a.a.createElement(u.a,null,a.a.createElement("div",{className:"container"},a.a.createElement("nav",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(u.b,{to:"/"},"Home")),a.a.createElement("li",null,a.a.createElement(u.b,{to:"/historial"},"Historial")))),a.a.createElement(i.c,null,a.a.createElement(i.a,{path:"/historial"},a.a.createElement(R,null)),a.a.createElement(i.a,{path:"/"},a.a.createElement(b,null))))))}var L=n(14),S=Object(L.c)({loadingUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_USER":return t.user;default:return e}},loadingProducts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_PRODUCTS":return t.products;default:return e}},loadingError:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_ERROR":return t.hasErrored;default:return e}},loadingInProgress:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_IN_PROGRESS":return t.isLoading;default:return e}},loadingHistory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_HISTORY":return t.history;default:return e}},uploadRedeemProduct:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REDEEM_PRODUCT":return t.productId;default:return e}},errorRedeem:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR_REDEEM":return t.errorRed;default:return e}}}),w=n(35),D=function(e){return function(t){return function(n){var r;return console.groupCollapsed("dispatching",n.type),console.log("prev state: ",e.getState()),console.log("action: ",n),r=t(n),console.log("next state: ",e.getState()),console.groupEnd(),r}}},_=function(){return Object(L.d)(S,Object(L.a)(D,w.a))}();c.a.render(a.a.createElement(l.a,{store:_},a.a.createElement(P,null)),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1d209059.chunk.js.map