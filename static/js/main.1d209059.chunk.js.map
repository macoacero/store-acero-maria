{"version":3,"sources":["images/icons/buy-blue.svg","components/Pagination.js","components/ProductsList.js","actions/index.js","containers/Products.js","components/History.js","containers/History.js","components/Header.js","containers/Header.js","components/App.js","reducers/index.js","stores/index.js","index.js"],"names":["module","exports","usePagination","data","itemsPerPage","useState","currentPage","setCurrentPage","maxPage","Math","ceil","length","next","min","prev","max","jump","page","pageNumber","currentData","begin","end","slice","ProductsList","onLoadProd","products","hasError","isLoading","user","onClickRedeem","errorRed","points","productId","category","setCategory","unique","filter","cat","index","self","findIndex","t","optionsCategory","label","value","concat","map","prod","setPage","count","_DATA","useEffect","className","placeholder","styles","container","width","menu","background","position","zIndex","options","defaultValue","onChange","product","i","key","cost","_id","onClick","alt","src","BuyBlue","img","url","name","Pagination","size","variant","shape","e","p","loadingError","bool","type","hasErrored","loadingInProgress","errorRedeem","headers","Accept","Authorization","connect","state","loadingProducts","loadingUser","uploadRedeemProduct","uploadPoint","dispatch","ownProps","fetch","then","response","ok","Error","statusText","json","catch","method","body","JSON","stringify","error","redeemProduct","History","onLoadHistory","history","loadingHistory","Header","onLoadUser","loadPoints","setPoints","Fragment","addPoints","App","to","path","Products","combineReducers","action","logger","store","result","console","groupCollapsed","log","getState","groupEnd","createStore","rootReducer","applyMiddleware","thunk","storeFactory","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1d209059.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/buy-blue.2f11a957.svg\";","import { useState } from \"react\";\r\n\r\nfunction usePagination(data, itemsPerPage) {\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n    const maxPage = Math.ceil(data.length / itemsPerPage);\r\n\r\n    function currentData() {\r\n        const begin = (currentPage - 1) * itemsPerPage;\r\n        const end = begin + itemsPerPage;\r\n        return data.slice(begin, end);\r\n    }\r\n\r\n    function next() {\r\n        setCurrentPage((currentPage) => Math.min(currentPage + 1, maxPage));\r\n    }\r\n\r\n    function prev() {\r\n        setCurrentPage((currentPage) => Math.max(currentPage - 1, 1));\r\n    }\r\n\r\n    function jump(page) {\r\n        const pageNumber = Math.max(1, page);\r\n        setCurrentPage((currentPage) => Math.min(pageNumber, maxPage));\r\n    }\r\n\r\n    return { next, prev, jump, currentData, currentPage, maxPage };\r\n}\r\n\r\nexport default usePagination;","import React, { useEffect, useState } from 'react';\r\nimport BuyBlue from '../images/icons/buy-blue.svg';\r\nimport Select from \"react-select\";\r\nimport { Pagination } from \"@material-ui/lab\";\r\nimport usePagination from \"./Pagination\";\r\n\r\nconst ProductsList = ({ onLoadProd, products, hasError, isLoading, user, onClickRedeem, errorRed, points, productId }) => {\r\n\r\n  const customStyles = {\r\n    container: () => ({\r\n      width: 220,\r\n    }),\r\n    menu:() => ({\r\n      width: 220,\r\n      background: '#ffffff',\r\n      position: 'absolute',\r\n      zIndex: 500\r\n    }),\r\n  }\r\n\r\nconst [category, setCategory] = useState(\"\");\r\n\r\nconst unique = products.filter((cat, index, self) =>\r\n  index === self.findIndex((t) => (\r\n    t.category === cat.category\r\n  ))\r\n)\r\n\r\nconst optionsCategory = [{ label: \"Todas las categorias\", value: 'all'}].concat(unique.map(prod => {\r\n  return { value: prod.category, label: prod.category }\r\n}));\r\n\r\nconst handleChangeCategory = category => {\r\n  setCategory(category);\r\n};\r\n\r\nlet [page, setPage] = useState(1);\r\nconst PER_PAGE = 12;\r\n\r\nconst count = Math.ceil(\r\n  category.value === 'all' || category === '' ?  \r\n  products.length / PER_PAGE :  \r\n  products.filter(cat => cat.category === category.value).length / PER_PAGE);\r\n\r\nconst _DATA = usePagination(\r\n  category.value === 'all' || category === '' ? \r\n  products :  products.filter(cat => cat.category === category.value), PER_PAGE);\r\n\r\nconst handleChange = (e, p) => {\r\n  setPage(p);\r\n  _DATA.jump(p);\r\n};\r\n\r\nuseEffect(() => {\r\n  onLoadProd();\r\n}, [onLoadProd, points]);\r\n\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <Select placeholder={category.value} styles={customStyles} options={optionsCategory} defaultValue={{ label: \"Todas las categorias\", value: 'all' }} onChange={handleChangeCategory}/>\r\n      <h2>Productos</h2>\r\n      <div className=\"row\">\r\n        {isLoading ? <h6>Loading…</h6> : !hasError ?\r\n          _DATA.currentData().map((product, i) =>\r\n            <div className=\"col-sm-4\" key={i}>\r\n              <div className=\"card\">\r\n              {user.points >= product.cost ?\r\n                <div className={!errorRed ? product._id === productId ? \"redeemed-product\" : \"no-redeemed-product\" : \"error-redeeming-product\" }>\r\n                  <span className=\"points-redeem\">{product.cost} Puntos</span>\r\n                  <button className=\"redeem-button\" onClick={() => onClickRedeem(product._id)}>Redimir ahora</button>\r\n                  {!errorRed ? product._id === productId ? \"El pruducto fue redimido exitosamente\" : null : \"No se pudo redimir el producto. Intente más tarde\"}\r\n                </div> : null}\r\n                {user.points < product.cost ? <div className=\"missing-points\">Faltan: {product.cost - user.points} Puntos</div> : <div><img alt=\"\" src={BuyBlue} className=\"redeemable\"/></div>}\r\n                <img alt=\"product\" src={product.img.url} className=\"image-prod\"/>\r\n                <div className=\"txt\">\r\n                  <span className=\"category\" >\r\n                    {product.category}\r\n                  </span>\r\n                  <span className=\"name\" >\r\n                    {product.name}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n          </div>) : <div>Error cargando los productos. Por favor intente más tarde.</div>\r\n        }\r\n      </div>\r\n      <Pagination\r\n        count={count}\r\n        size=\"large\"\r\n        page={page}\r\n        variant=\"outlined\"\r\n        shape=\"rounded\"\r\n        onChange={handleChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ProductsList\r\n","export const loadingError = (bool) => ({\r\n  type: \"LOADING_ERROR\",\r\n  hasErrored: bool\r\n});\r\n\r\nexport const loadingInProgress = (bool) => ({\r\n  type: \"LOADING_IN_PROGRESS\",\r\n  isLoading: bool\r\n});\r\n\r\nexport const loadingProducts = (products) => ({\r\n  type: \"LOADING_PRODUCTS\",\r\n  products\r\n});\r\n\r\nexport const loadingUser = (user) => ({\r\n  type: \"LOADING_USER\",\r\n  user\r\n});\r\n\r\nexport const loadingHistory = (history) => ({\r\n  type: \"LOADING_HISTORY\",\r\n  history\r\n});\r\n\r\nexport const uploadPoint = (points) => ({\r\n  type: \"UPLOAD_POINTS\",\r\n  points\r\n});\r\n\r\nexport const uploadRedeemProduct = (productId) => ({\r\n  type: \"REDEEM_PRODUCT\",\r\n  productId\r\n});\r\n\r\nexport const errorRedeem = (bool) => {\r\n  return ({\r\n    type: \"ERROR_REDEEM\",\r\n    errorRed: bool\r\n  });\r\n};\r\n\r\nexport const filterByCategory = (category) => {\r\n  return ({\r\n    type: \"FILTER_CATEGORY\",\r\n    category\r\n  });\r\n}\r\n\r\n\r\nconst headers = {\r\n  \"Content-Type\": \"application/json\",\r\n  Accept: \"application/json\",\r\n  Authorization: `Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjQ0NmUzZjc0MjM1MjAwMWVkOTA5N2EiLCJpYXQiOjE1OTgzMjAxOTF9.SvYm_3UWhP11QddDsVSJU7rVdMnAzNzl9fLO4dcPc4k`\r\n}\r\n\r\nexport const getProducts = () => {\r\n  return (dispatch) => {\r\n    dispatch(loadingError(false));\r\n    dispatch(loadingInProgress(true));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/products\", { headers })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        dispatch(loadingInProgress(false));\r\n\r\n        return response;\r\n\r\n      })\r\n\r\n      .then((response) => response.json())\r\n      .then((products) => dispatch(loadingProducts(products)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const getUser = () => {\r\n  return (dispatch) => {\r\n    dispatch(loadingError(false));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/user/me\", { headers })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response;\r\n      })\r\n      .then((response) => response.json())\r\n      .then((user) => dispatch(loadingUser(user)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const getHistory = () => {\r\n  return (dispatch) => {\r\n    dispatch(loadingError(false));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/user/history\", { headers })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response;\r\n      })\r\n      .then((response) => response.json())\r\n      .then((history) => dispatch(loadingHistory(history)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const addPoints = (points) => {\r\n  return (dispatch) => {\r\n    const data = { \"amount\": points };\r\n\r\n    dispatch(loadingError(false));\r\n\r\n    fetch(\"https://coding-challenge-api.aerolab.co/user/points\", {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response;\r\n      })\r\n      .then((response) => response.json())\r\n      .then((points) => dispatch(uploadPoint(points)))\r\n      .catch(() => dispatch(loadingError(true)));\r\n\r\n  };\r\n};\r\n\r\nexport const redeemProduct = (productId) => {\r\n  return (dispatch) => {\r\n    const data = { \"productId\": productId };\r\n\r\n    dispatch(errorRedeem(false));\r\n    fetch('https://coding-challenge-api.aerolab.co/redeem', {\r\n      method: 'POST',\r\n      headers,\r\n      body: JSON.stringify(data),\r\n    })\r\n\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw Error(response.statusText);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(() => dispatch(uploadRedeemProduct(productId)))\r\n      .catch((error) => {\r\n        dispatch(errorRedeem(true))\r\n      });\r\n  };\r\n};\r\n\r\n","import { connect } from \"react-redux\";\r\nimport ProductsList from \"../components/ProductsList\";\r\nimport { getProducts, redeemProduct } from '../actions'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  products: state.loadingProducts,\r\n  hasError: state.loadingError,\r\n  isLoading: state.loadingInProgress,\r\n  user: state.loadingUser,\r\n  productId: state.uploadRedeemProduct,\r\n  errorRed: state.errorRedeem,\r\n  points: state.uploadPoint\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n  onLoadProd: () => dispatch(getProducts()),\r\n  onClickRedeem: (productId) => dispatch(redeemProduct(productId)),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(ProductsList)","import React, { useEffect, useState } from 'react';\r\nimport { Pagination } from \"@material-ui/lab\";\r\nimport usePagination from \"./Pagination\";\r\n\r\nconst History = ({ onLoadHistory, history, hasError, isLoading }) => {\r\n\r\n  let [page, setPage] = useState(1);\r\n  const PER_PAGE = 12;\r\n  \r\n  const count = Math.ceil( history.length / PER_PAGE);\r\n  \r\n  const _DATA = usePagination(history, PER_PAGE);\r\n  \r\n  const handleChange = (e, p) => {\r\n    setPage(p);\r\n    _DATA.jump(p);\r\n  };\r\n\r\nuseEffect(() => {\r\n  onLoadHistory();\r\n    }, [onLoadHistory]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>Historial</h2>\r\n      <div className=\"row\">\r\n      {isLoading ? <h6>Loading…</h6> : !hasError ?\r\n          _DATA.currentData().map((product, i) =>\r\n            <div className=\"col-sm-4\">\r\n              <div className=\"card\" key={i}>\r\n                <img alt=\"product\" src={product.img.url} className=\"image-prod\"/>\r\n                <div className=\"txt\">\r\n                  <span className=\"category\" >\r\n                    {product.category}\r\n                  </span>\r\n                  <span className=\"name\" >\r\n                    {product.name}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n          </div>) : <div>Error cargando los productos. Por favor intente más tarde.</div>\r\n        }\r\n      </div>\r\n      <Pagination\r\n        count={count}\r\n        size=\"large\"\r\n        page={page}\r\n        variant=\"outlined\"\r\n        shape=\"rounded\"\r\n        onChange={handleChange}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default History\r\n","import { connect } from \"react-redux\";\r\nimport History from \"../components/History\";\r\nimport { getHistory } from '../actions'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  history: state.loadingHistory,\r\n  hasError: state.loadingError,\r\n  isLoading: state.loadingInProgress,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n  onLoadHistory: () => dispatch(getHistory()),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(History)","import React, { useEffect, useState } from 'react';\r\nimport Select from \"react-select\";\r\n\r\nconst Header = ({ onLoadUser, user, loadPoints, products }) => {\r\n\r\n  const customStyles = {\r\n    container: () => ({\r\n      width: 200,\r\n    }),\r\n    menu:() => ({\r\n      width: 200,\r\n      background: '#ffffff',\r\n      position: 'absolute'\r\n    }),\r\n  }\r\n\r\n  const pointsOptions = [\r\n    { value: 1000, label: \"1000\" },\r\n    { value: 5000, label: \"5000\" },\r\n    { value: 7500, label: \"7500\" }\r\n  ];\r\n \r\n\r\n  const [points, setPoints] = useState(\"\");\r\n    \r\n  useEffect(() => {\r\n    onLoadUser();\r\n      }, [onLoadUser, points]);\r\n\r\n  const handleChangePoints = points => {\r\n    setPoints(points);\r\n    loadPoints(points.value);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"top-bar\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n            <div className=\"user-name\">{user.name}</div>\r\n            <div className=\"points\">{user.points} <span>puntos</span></div>\r\n          </div>\r\n        </div>\r\n        <Select styles={customStyles} placeholder=\" Agregar puntos\" options={pointsOptions} onChange={handleChangePoints} />\r\n      </div>\r\n      <div className=\"header\">\r\n        <div className=\"container\">\r\n          <div className=\"row\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import { connect } from \"react-redux\";\r\nimport Header from \"../components/Header\";\r\nimport { getUser, addPoints } from '../actions'\r\n\r\nconst mapStateToProps = (state) => ({\r\n  products: state.loadingProducts,\r\n  user: state.loadingUser,\r\n  points: state.uploadPoint\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => ({\r\n  onLoadUser: () => dispatch(getUser()),\r\n  loadPoints: (points) => dispatch(addPoints(points)),\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps,\r\n)(Header)","import React from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link\n} from \"react-router-dom\";\nimport Products from '../containers/Products';\nimport History from '../containers/History';\nimport Header from '../containers/Header';\nimport '../styles.scss';\n\nexport default function App() {\n  return (\n    <div className=\"App\">\n      <Header />\n      <Router>\n        <div className=\"container\">\n          <nav>\n            <ul>\n              <li>\n                <Link to=\"/\">Home</Link>\n              </li>\n              <li>\n                <Link to=\"/historial\">Historial</Link>\n              </li>\n            </ul>\n          </nav>\n\n          <Switch>\n            <Route path=\"/historial\">\n              <History />\n            </Route>\n            <Route path=\"/\">\n              <Products />\n            </Route>\n          </Switch>\n        </div>\n      </Router>\n    </div>\n  );\n}","import { combineReducers } from 'redux'\r\n\r\nconst loadingError = (state = false, action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_ERROR':\r\n      return action.hasErrored;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst loadingInProgress = (state = false, action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_IN_PROGRESS':\r\n      return action.isLoading;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nconst loadingProducts = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_PRODUCTS':\r\n      return action.products\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst loadingUser = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_USER':\r\n      return action.user\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst loadingHistory = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'LOADING_HISTORY':\r\n      return action.history\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst uploadRedeemProduct = (state = [], action) => {\r\n  switch (action.type) {\r\n    case 'REDEEM_PRODUCT':\r\n      return action.productId\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst errorRedeem= (state = false, action) => {\r\n  switch (action.type) {\r\n    case 'ERROR_REDEEM':\r\n      return action.errorRed\r\n    default:\r\n      return state  }\r\n}\r\n\r\nexport default combineReducers({\r\n  loadingUser,\r\n  loadingProducts,\r\n  loadingError,\r\n  loadingInProgress,\r\n  loadingHistory,\r\n  uploadRedeemProduct,\r\n  errorRedeem\r\n})\r\n","import { createStore, applyMiddleware } from 'redux'\r\nimport rootReducer from '../reducers'\r\nimport thunk from 'redux-thunk'\r\n\r\nconst logger = store => next => action => {\r\n  let result\r\n  console.groupCollapsed('dispatching', action.type)\r\n  console.log('prev state: ', store.getState())\r\n  console.log('action: ', action)\r\n  result = next(action)\r\n  console.log('next state: ', store.getState())\r\n  console.groupEnd()\r\n  return result\r\n}\r\n\r\nconst storeFactory = () =>\r\n  createStore(\r\n    rootReducer,\r\n    applyMiddleware(logger, thunk)\r\n  )\r\n\r\nexport default storeFactory","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport { Provider } from 'react-redux'\nimport storeFactory from './stores/index'\n\nconst store = storeFactory()\n\nReactDOM.render(\n  <Provider store={store}>\n      <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}